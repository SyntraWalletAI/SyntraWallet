{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "scoringConfigSchema": {
    "type": "object",
    "additionalProperties": false,
    "required": ["weights", "scale", "clamp", "smoothingFactor", "dynamicThresholds", "volatilityAdjustment"],
    "properties": {
      "weights": {
        "type": "object",
        "additionalProperties": false,
        "required": ["volume", "liquidity", "volatility"],
        "properties": {
          "volume": { "type": "number", "minimum": 0 },
          "liquidity": { "type": "number", "minimum": 0 },
          "volatility": { "type": "number", "minimum": 0 }
        },
        "description": "Raw weights (will be normalized so their sum = 1)"
      },
      "scale": { "type": "number", "exclusiveMinimum": 0 },
      "clamp": {
        "type": "array",
        "minItems": 2,
        "maxItems": 2,
        "items": [{ "type": "number" }, { "type": "number" }],
        "description": "[min, max] range for final score"
      },
      "smoothingFactor": {
        "type": "number",
        "minimum": 0,
        "maximum": 1,
        "description": "EMA alpha applied to previous score"
      },
      "dynamicThresholds": {
        "type": "object",
        "additionalProperties": false,
        "required": ["low", "medium", "high"],
        "properties": {
          "low": { "type": "number" },
          "medium": { "type": "number" },
          "high": { "type": "number" }
        },
        "description": "Must satisfy low < medium < high"
      },
      "volatilityAdjustment": {
        "type": "object",
        "additionalProperties": false,
        "required": ["enabled", "multiplier"],
        "properties": {
          "enabled": { "type": "boolean" },
          "multiplier": { "type": "number", "exclusiveMinimum": 0 }
        }
      }
    }
  },
  "defaultConfig": {
    "weights": {
      "volume": 0.4,
      "liquidity": 0.45,
      "volatility": 0.15
    },
    "scale": 150,
    "clamp": [0, 200],
    "smoothingFactor": 0.7,
    "dynamicThresholds": {
      "low": 50,
      "medium": 100,
      "high": 150
    },
    "volatilityAdjustment": {
      "enabled": true,
      "multiplier": 1.2
    }
  },
  "exampleInputs": {
    "volume": 0.6,
    "liquidity": 0.7,
    "volatility": 0.3
  },
  "computedExample": {
    "weighted": 0.609,
    "score": 91.35,
    "smoothed": 91.35,
    "category": "medium",
    "breakdown": {
      "inputs": {
        "volume": 0.6,
        "liquidity": 0.7,
        "volatility": 0.3
      },
      "weights": {
        "volume": 0.4,
        "liquidity": 0.45,
        "volatility": 0.15
      },
      "weightsNormalized": {
        "volume": 0.4,
        "liquidity": 0.45,
        "volatility": 0.15
      },
      "volatilityAdjusted": 0.36,
      "scale": 150,
      "clamp": [0, 200],
      "thresholds": {
        "low": 50,
        "medium": 100,
        "high": 150
      },
      "smoothingFactor": 0.7
    }
  }
}
